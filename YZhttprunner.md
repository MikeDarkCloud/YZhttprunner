//allure使用
前提安装：
allure第三方工具    http://allure.qatools.ru/   2.7
allure-pytest     python库
pyyaml            python库
pytest-html       python库
httprunner3+      python库
httprunner[upload]  python库





步骤一：运行测试用例
pytest hetest_re_test.py --alluredir report    #指定测试用例文件
         #执行当前文件夹所有用例文件
或者
hrun hetest_re.yml --alluredir=report     

步骤二：#生成allure报告
allure generate report  # 默认在当前目录下生成allure-report文件
allure generate report -o allure-report --clean  #  --clean是为了清空已有的测试报告； -o allure-report 是指定清空测试报告的文件allure-report


httprunner3.x参数化使用：

第一种参数化
一 . 直接指定参数列表：

该种方式最为简单易用，适合参数列表比较小的情况

# NOTE: Generated By HttpRunner v3.1.3
# FROM: testcases/hetest_re.yml


import pytest
from httprunner import Parameters


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase


class TestCaseHetestRe(HttpRunner):
    @pytest.mark.parametrize(
        "param",
        Parameters(
            {"uid": [1**7, 1245], "choujiang_id": [***, 33], "username": ["**", "mm"]}
        ),
    )
    def test_start(self, param):
        super().test_start(param)

    config = (
        Config("hz测试").base_url("https://lottery.hz.z*****in.com").verify(False)
    )

    teststeps = [
        Step(
            RunRequest("接口test /lotteryTest.php")
            .get("/lotteryTest.php")
            .with_params(
                **{
                    "uid": "$uid",
                    "choujiang_id": "$choujiang_id",
                    "username": "$username",
                }
            )
            .validate()
            .assert_equal("status_code", 200)
            .assert_equal("body.status", 1)
        ),
    ]


if __name__ == "__main__":
    TestCaseHetestRe().test_start()
    
==============================================
 
二 . csv导入
1.引用外部的csv文件，文件位置和debugtalk.py同一级别，即项目的根目录（也可以在该目录下指定相对路径，比如data/*.csv）

2.一个csv只存放一个字段

3.csv文件里的字段名要和实际的一致
csv文件参数化

1)csv文件位置和debugtalk.py同一级别时，引用csv文件语法${P(user_name.csv)}
【pytest格式】
pytest格式运用csv文件时，csv要存放在和测试用例同一目录下，要不然会报错（或者用绝对路径，下面会有介绍）
@pytest.mark.parametrize(
        "param",
        Parameters(
            {
                "uid": "${parameterize(hzuid.csv)}",
                "choujiang_id": "${parameterize(hzcjid.csv)}",
                "username": ["**", "mm"],
            }
        ),
    )    
2)csv文件如果是相对路径，情况如下：
@pytest.mark.parametrize(
        "param",
        Parameters(
            {
                "uid": "${parameterize(/Users/may/Documents/automatortest/httprunner/testHttprunner/mayhttprunner/data/hzuid.csv)}",
                "choujiang_id": [***,125],
                "username": ["**", "mm"],
            }
        ),
    )
    def test_start(self, param):
        super().test_start(param)
   
=====================================
【参数化：一对一】
 要的目标是两组参数

[1**7,***,**]    [4353,33,mm]

把参数关联起来，用 “- ”关联

uid-choujiang_id-username: ${parameterize(data/hz1t1.csv)}
# NOTE: Generated By HttpRunner v3.1.3
# FROM: testcases/hzoto.yml


import pytest
from httprunner import Parameters


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase


class TestCaseHzoto(HttpRunner):
    @pytest.mark.parametrize(
        "param",
        Parameters({"uid-choujiang_id-username":           "${parameterize(/Users/may/Documents/automatortest/httprunner/testHttprunner/mayhttprunner/data/hz1t1.csv)}"}),     ) 
def test_start(self, param): super().test_start(param) config = ( Config("hz测试").base_url("https://lottery.hz.z****n.com").verify(False) ) teststeps = [ Step( RunRequest("接口test /lotteryTest.php") .get("/lotteryTest.php") .with_params( **{ "uid": "$uid", "choujiang_id": "$choujiang_id", "username": "$username", } ) .validate() .assert_equal("status_code", 200) .assert_equal("body.status", 1) ), ] if __name__ == "__main__": TestCaseHzoto().test_start()


jenkins集成
https://www.cnblogs.com/Detector/p/9058497.html